<!doctype html>
<html>
  <head>
    <title>Fantasy Cricket</title>
  </head>
  <body>
    <!--  LOGIN SECTION -->
    <div id="loginSection">
      <h2>Login</h2>
      <input type="email" id="email" placeholder="Email" />
      <input type="password" id="password" placeholder="Password" />
      <button onclick="login()">Login</button>
      <button onclick="signup()">Sign Up</button>
    </div>

<!-- APP SECTION (HIDDEN UNTIL LOGIN) -->
    <div id="appSection" style="display:none;"></div>
    <h1>Fantasy Cricket Team Selection</h1>
    <button onclick="submitTeam()">Submit Team</button>
    <button onclick="loadLeaderboard()">Show Leaderboard</button>
    <button onclick="logout()">Logout</button>
  </div>
 

<!-- ðŸ”¥ Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCPrmDt5lF3k8ztabxakQ7IBHaFaBLb4UA",
    authDomain: "fantasy-cricket-group.firebaseapp.com",
    projectId: "fantasy-cricket-group",
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  function signup() {
    auth
      .createUserWithEmailAndPassword(email.value, password.value)
      .catch((e) => alert(e.message));
  }

  function login() {
    auth
      .signInWithEmailAndPassword(email.value, password.value)
      .catch((e) => alert(e.message));
  }

  function logout() {
    auth.signOut();
  }

  function loadLeaderboard(){
  fetch('/leaderboard')
    .then(res=>res.json())
    .then(data=>{
      console.log(data);
      alert("Top score: " + data[0].points);
    });
}

  // ðŸ‘‡ THIS switches screens automatically
  auth.onAuthStateChanged((user) => {
    if (user) {
    // User logged in
    document.getElementById("loginSection").style.display = "none";
    document.getElementById("appSection").style.display = "block";
  } else {
    // Not logged in
    document.getElementById("loginSection").style.display = "block";
    document.getElementById("appSection").style.display = "none";
  }
  });
</script>


 </body>
</html>